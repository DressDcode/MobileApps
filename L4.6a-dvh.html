<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>lvh vs dvh vs svh — Mobile Demo</title>
  <style>
    * { box-sizing: border-box; margin: 0; }
    html, body { min-height: 100%; }
    body {
      font-family: -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background:#0b1220; color:#fff;
    }

    header {
      position: sticky; top: 0; z-index: 10;
      background: rgba(11,18,32,.9);
      border-bottom: 1px solid #141c2a;
      padding: .6rem 1rem env(safe-area-inset-top) 1rem;
      backdrop-filter: blur(8px);
      display: flex; gap: .75rem; align-items: center; justify-content: space-between;
      font-size: 14px;
    }
    .pills { display:flex; gap:.5rem; overflow:auto; white-space:nowrap; }
    .pill  { background:#101829; border:1px solid #1f2a3c; border-radius:999px; padding:.25rem .6rem; color:#cdd3db; }

    /* Panels */
    .wrap {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2px; /* λεπτό χώρισμα */
      padding-bottom: env(safe-area-inset-bottom);
      min-height: 200vh; /* εξασφαλίζει λίγη κύλιση ώστε να αλλάζει η address bar */
    }

    .panel {
      position: relative;
      display: flex; align-items:center; justify-content:center; gap: 12px;
      padding: 16px; text-align: center;
      overflow: hidden;
    }
    .lvh { background:#16a34a; height: 100lvh; }
    .dvh { background:#ef5247; height: 100dvh; }
    .svh { background:#2563eb; height: 100svh; }

    h1 { font-size: 28px; line-height: 1.1; }
    p  { opacity: .9; }

    input {
      padding: 10px 12px; border-radius: 10px; border: 0;
      width: 80%; max-width: 240px; font-size: 16px; background:#fff; color:#111;
    }

    /* μετρητές σε κάθε panel */
    .meter {
      position: absolute; top: 10px; left: 10px;
      font: 700 12px ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.15);
      border-radius: 8px; padding: 8px 10px; text-align: left;
      backdrop-filter: blur(6px);
    }

    /* Γραμμή αναφοράς στο ΟΡΑΤΟ κάτω μέρος */
    .baseline {
      position: fixed; left: 0; right: 0; bottom: 0;
      height: 3px; background: #fff; opacity: .6;
      z-index: 20;
    }

    /* Σημείωση: μικρές οθόνες → επιτρέπουμε οριζόντια κύλιση */
    @media (max-width: 640px) {
      .wrap { grid-template-columns: 80vw 80vw 80vw; overflow-x: auto; }
    }
  </style>
</head>
<body>
  <header>
    <strong>lvh / dvh / svh</strong>
    <div class="pills">
      <span class="pill" id="vp">visualViewport: —×—</span>
      <span class="pill" id="bars">UI inset: —px</span>
    </div>
  </header>

  <!-- Λίγος χώρος πριν τα panels για να «παίζει» η address bar -->
  <div style="height: 20vh"></div>

  <main class="wrap">
    <section class="panel lvh" id="box-lvh">
      <div class="meter" id="m-lvh">100lvh: —px</div>
      <div>
        <h1>100lvh</h1>
        <p>Μεγαλύτερο ορατό ύψος</p>
        <input placeholder="Πάτησε εδώ…" />
      </div>
    </section>

    <section class="panel dvh" id="box-dvh">
      <div class="meter" id="m-dvh">100dvh: —px</div>
      <div>
        <h1>100dvh</h1>
        <p>Δυναμικό ορατό ύψος</p>
        <input placeholder="Πάτησε εδώ…" />
      </div>
    </section>

    <section class="panel svh" id="box-svh">
      <div class="meter" id="m-svh">100svh: —px</div>
      <div>
        <h1>100svh</h1>
        <p>Μικρότερο ορατό ύψος</p>
        <input placeholder="Πάτησε εδώ…" />
      </div>
    </section>
  </main>

  <!-- baseline στο ορατό κάτω όριο -->
  <div class="baseline" aria-hidden="true"></div>

  <script>
    // Ζωντανές μετρήσεις και ενημέρωση
    const boxes = {
      lvh: document.getElementById('box-lvh'),
      dvh: document.getElementById('box-dvh'),
      svh: document.getElementById('box-svh')
    };
    const meters = {
      lvh: document.getElementById('m-lvh'),
      dvh: document.getElementById('m-dvh'),
      svh: document.getElementById('m-svh')
    };
    const vp   = document.getElementById('vp');
    const bars = document.getElementById('bars');

    function h(el){ return Math.round(el.getBoundingClientRect().height); }
    function vvh(){ return Math.round((window.visualViewport?.height) || window.innerHeight); }

    function update(){
      meters.lvh.textContent = '100lvh: ' + h(boxes.lvh) + 'px';
      meters.dvh.textContent = '100dvh: ' + h(boxes.dvh) + 'px';
      meters.svh.textContent = '100svh: ' + h(boxes.svh) + 'px';

      vp.textContent = 'visualViewport: ' + (window.visualViewport?.width || window.innerWidth) + '×' + vvh();

      // πόσο UI «τρώει» (address/tab bar κ.λπ.)
      const inset = window.innerHeight - vvh();
      bars.textContent = 'UI inset: ' + (inset > 0 ? inset + 'px' : '0px');
    }

    const sched = () => requestAnimationFrame(update);
    ['resize','orientationchange','scroll','focusin','focusout'].forEach(ev =>
      window.addEventListener(ev, sched, {passive:true})
    );
    if (window.visualViewport) {
      visualViewport.addEventListener('resize', sched);
      visualViewport.addEventListener('scroll',  sched);
    }
    update();
  </script>
</body>
</html>
